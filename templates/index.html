<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xilo AI Tutor - Intel GPU Powered Learning</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-brain logo-icon"></i>
                    <h1>Xilo AI Tutor</h1>
                    <span class="subtitle">Powered by Intel GPU & Phi 3.5</span>
                </div>
                <div class="status-section">
                    <div class="gpu-status" id="gpu-status">
                        <i class="fas fa-microchip"></i>
                        <span>Loading...</span>
                    </div>
                    <a href="/logs" class="logs-link">
                        <i class="fas fa-chart-line"></i>
                        <span>System Logs</span>
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Chat Interface -->
        <main class="chat-container">
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    <div class="message-content">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-text">
                            <h3>Welcome to Xilo AI Tutor! ğŸ“</h3>
                            <p>I'm your AI-powered learning companion, running on your Intel GPU with XMX engines for lightning-fast responses!</p>
                            <p>Ask me anything you'd like to learn about - math, science, programming, history, or any other subject. I'm here to help you understand and grow!</p>
                            <div class="suggestions">
                                <button class="suggestion-btn" onclick="sendSuggestion('Explain quantum physics in simple terms')">
                                    <i class="fas fa-atom"></i> Quantum Physics
                                </button>
                                <button class="suggestion-btn" onclick="sendSuggestion('Help me learn Python programming')">
                                    <i class="fab fa-python"></i> Python Programming
                                </button>
                                <button class="suggestion-btn" onclick="sendSuggestion('Explain calculus derivatives with examples')">
                                    <i class="fas fa-calculator"></i> Calculus
                                </button>
                                <button class="suggestion-btn" onclick="sendSuggestion('Tell me about machine learning')">
                                    <i class="fas fa-brain"></i> Machine Learning
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading Animation -->
            <div class="loading-message" id="loading-message" style="display: none;">
                <div class="message-content">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-text">
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                        <span class="loading-text">Xilo is thinking on Intel GPU...</span>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="user-input" 
                        placeholder="Ask me anything you'd like to learn..." 
                        rows="1"
                        maxlength="1000"
                    ></textarea>
                    <button id="send-button" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-footer">
                    <div class="char-counter">
                        <span id="char-count">0</span>/1000
                    </div>
                    <div class="shortcuts">
                        Press <kbd>Enter</kbd> to send, <kbd>Shift+Enter</kbd> for new line
                    </div>
                </div>
            </div>
        </main>

        <!-- Model Info Modal -->
        <div class="modal" id="info-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-info-circle"></i> System Information</h3>
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body" id="modal-body">
                    Loading system information...
                </div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settings-panel">
            <button class="settings-toggle" onclick="toggleSettings()">
                <i class="fas fa-cog"></i>
            </button>
            <div class="settings-content">
                <h4>Generation Settings</h4>
                
                <div class="setting-item">
                    <label for="language-select">Language:</label>
                    <select id="language-select" onchange="xiloChat.changeLanguage(this.value)">
                        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                        <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                        <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                        <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
                        <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
                        <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                        <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                        <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                        <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                        <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                        <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                        <option value="ml">ğŸ‡®ğŸ‡³ à´®à´²à´¯à´¾à´³à´‚</option>
                    </select>
                </div>
                
                <div class="setting-item">
                    <label for="translation-mode">Translation Mode:</label>
                    <select id="translation-mode" onchange="xiloChat.changeTranslationMode(this.value)">
                        <option value="direct">ğŸ¤– Direct AI (Beta)</option>
                        <option value="google" selected>ğŸŒ Google Translate</option>
                    </select>
                    <small style="color: var(--text-muted); font-size: 0.75rem; display: block; margin-top: 0.25rem;">
                        Direct: AI responds natively (may hallucinate)<br>
                        Google: Translate English responses (more accurate)
                    </small>
                </div>
                
                <div class="setting-item">
                    <label for="temperature">Temperature:</label>
                    <input type="range" id="temperature" min="0.1" max="1.0" step="0.1" value="0.7">
                    <span id="temp-value">0.7</span>
                </div>
                <div class="setting-item">
                    <label for="max-length">Max Length:</label>
                    <input type="range" id="max-length" min="512" max="2048" step="128" value="2048">
                    <span id="length-value">2048</span>
                </div>
                <button class="info-btn" onclick="showInfo()">
                    <i class="fas fa-info-circle"></i> System Info
                </button>
                <button class="info-btn" onclick="xiloChat.clearChatHistory()" style="background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%); margin-top: 0.5rem;">
                    <i class="fas fa-trash"></i> Clear Chat History
                </button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
